# DeepSeek API集成说明

## 功能特性

✅ **已完成的功能**:
- DeepSeek API集成
- 智能提示词工程
- JSON结构化输出解析
- 降级分析机制
- 完善的错误处理

## 技术实现

### 1. API调用
- 使用DeepSeek Chat模型
- 专业的营养师角色设定
- 结构化的提示词设计
- 温度参数优化（0.3）

### 2. 提示词工程
- 专业营养师身份设定
- 详细的评分标准说明
- 严格的JSON格式要求
- 科学依据的分析要求

### 3. 结果处理
- 智能JSON解析
- 数据验证和标准化
- 错误恢复机制
- 降级分析支持

## 配置说明

### 环境变量
```env
# DeepSeek API配置
DEEPSEEK_API_KEY=your-deepseek-api-key
```

### API参数
- `model`: deepseek-chat
- `temperature`: 0.3 - 保证结果稳定性
- `max_tokens`: 2000 - 充足的响应长度
- `stream`: false - 获取完整响应

## 代码结构

### 核心方法

1. **analyzeIngredients()** - 主分析方法
   - API调用管理
   - 错误处理
   - 降级机制

2. **buildAnalysisPrompt()** - 提示词构建
   - 专业角色设定
   - 详细评分标准
   - JSON格式要求

3. **parseAIResponse()** - 响应解析
   - JSON提取和解析
   - 数据验证
   - 错误恢复

4. **getFallbackAnalysis()** - 降级分析
   - 基于规则的评分
   - 基础健康建议
   - 保证服务可用性

## 评分标准

### 健康度评分（1-10分）
- **10分**: 天然、有机、营养丰富的成分
- **8-9分**: 营养价值高，对健康有益的成分
- **6-7分**: 中性成分，适量摄入无害
- **4-5分**: 需要注意摄入量的成分
- **2-3分**: 对健康有潜在风险的成分
- **1分**: 应避免或严格限制的成分

### 分析维度
- 营养价值
- 健康影响
- 安全性评估
- 摄入建议